---
title: Overview
---

import { Aside, Tabs, TabItem, Steps } from "@astrojs/starlight/components";

To now actually use the YubiKey, I need to make sure it works with `gpg`.
However we are presented with a couple issues, as explained in the following parts.

<Aside type="tip">

In case we use an _X session_, it might be smart to tell `gpg` what TTY we're on
by simply adding the following lines to the appropriate init file

<Tabs syncKey="shell">

<TabItem label="Xonsh">

```py title=~/.config/xonsh/user.xsh ins={1-2}
$GPG_TTY = $(tty)
gpg-connect-agent updatestartuptty /bye >/dev/null
```

</TabItem>

<TabItem label="Nushell">

```bash title=~/.bashrc ins={1-2}
export GPG_TTY=$(tty)
gpg-connect-agent updatestartuptty /bye >/dev/null
```

</TabItem>

</Tabs>

</Aside>

<Aside type="caution" title="Wrong permissions">

Unfortunately, `dotter` doesn't seem to set up the permissions correctly.
This is an issue and `gpg` will gladly and loudly complain about it.

To fix it

<Steps>

1.  Make sure you are indeed the owner of `~/.gnupg`.

2.  After that simply correct the wrong permissions

    ```sh
    chmod 700 ~/.gnupg
    chmod 600 ~/.gnupg/gpg.conf
    chmod 600 ~/.gnupg/gpg-agent.conf
    chmod 600 ~/.gnupg/sshcontrol
    ```

</Steps>

</Aside>
